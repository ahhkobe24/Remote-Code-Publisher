<!----------------------------------------------------------
 ../Repository/headfile/Display.h . Generated by CodePublisher. 
 Publised on Apr.5.2017 
 Generated by Jingsong Meng. 
------------------------------------------------------------>
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="../myStyle.css">
<script src="../myScript.js"></script>
</head>
<body onload="init()">
<h3>../Repository/headfile/Display.h</h3>
<pre>
#pragma once
#pragma once
/////////////////////////////////////////////////////////////////////
// Display.h - display NoSqlDb contents                            //
// ver 1.0                                                         //
// Jim Fawcett, CSE687 - Object Oriented Design, Spring 2017       //
/////////////////////////////////////////////////////////////////////
/*
* Package Operations:
* -------------------
* This package defines a single class, Display that shows contents
* of an instance of NoSqlDb&lt;Data&gt;.  It accepts a reference to a NoSqlDb&lt;Data&gt;
* database from which it displays records.
*
* I plan to replace the reference with a pointer so that the database can
* be changed without creating a new instance of Display&lt;Data&gt;.
*
* Required Files:
* ---------------
*   Display.h, Display.cpp,
*   NoSqlDb.h, NoSqlDb.cpp, CppProperties.h, CppProperties.cpp
*
* Maintenance History:
*---------------------
* ver 1.0 : 06 Feb 2017
* - first release
*/

#include "NoSqlDb.h"
//#include "../TestTypes/TestTypes.h"
#include "Utilities.h"
#include &lt;string&gt;
#include &lt;iostream&gt;

namespace NoSQLDB
<div name="content">{
	template &lt;typename Data&gt;
	class Display
<div name="content">	{
	public:
<div name="content">		enum Style { summary, detailed }</div>;

<div name="content">		Display(NoSqlDb&lt;Data&gt;& db) : db_(db) {}</div>

		void show(Key key, Style style = summary, size_t fieldwidth = 10, std::ostream& out = std::cout);
		void showAll(Style style = summary, size_t fieldwidth = 10, std::ostream& out = std::cout);
		void showHeader(Style style = summary, size_t fieldwidth = 10, std::ostream& out = std::cout);
		void showQuery(Keys keys, Style style = summary, size_t fieldwidth = 10, std::ostream& out = std::cout);

	private:
		void showSummary(Key key, size_t fieldwidth, std::ostream& out);
		void showDetails(Key key, size_t fieldwidth, std::ostream& out);
		NoSqlDb&lt;Data&gt;& db_;
	}</div>;
	//----&lt; show single record in one-line format &gt;----------------------

	template&lt;typename Data&gt;
	void Display&lt;Data&gt;::showSummary(Key key, size_t fieldwidth, std::ostream& out)
<div name="content">	{
		if (!db_.hasKey(key))
			return;
		Element&lt;Data&gt; elem = db_.value(key);
		int save = out.setf(std::ios::left, std::ios::adjustfield);
		out &lt;&lt; "  ";
		out &lt;&lt; std::setw(fieldwidth) &lt;&lt; key.substr(0, fieldwidth) &lt;&lt; " ";
		out &lt;&lt; std::setw(fieldwidth) &lt;&lt; static_cast&lt;std::string&gt;(elem.name).substr(0, fieldwidth) &lt;&lt; " ";
		out &lt;&lt; std::setw(fieldwidth) &lt;&lt; static_cast&lt;std::string&gt;(elem.category).substr(0, fieldwidth) &lt;&lt; " ";
		DateTime dt = elem.dateTime;
		out &lt;&lt; std::setw(fieldwidth) &lt;&lt; static_cast&lt;std::string&gt;(dt).substr(0, fieldwidth) &lt;&lt; " ";
		std::string temp = Utilities::Convert&lt;Data&gt;::toString(elem.data.getValue());
		out &lt;&lt; std::setw(fieldwidth) &lt;&lt; temp.substr(0, fieldwidth) &lt;&lt; " ";
		if (elem.children.getValue().size() &gt; 0)
<div name="content">		{
			for (Key k : elem.children.getValue())
				out &lt;&lt; std::setw(fieldwidth) &lt;&lt; static_cast&lt;std::string&gt;(k).substr(0, fieldwidth) &lt;&lt; " ";
		}</div>
		out &lt;&lt; "\n";
		out.setf(save);
	}</div>
	//----&lt; show single record with detailed, multi-line, format &gt;-------

	template&lt;typename Data&gt;
	void Display&lt;Data&gt;::showDetails(Key key, size_t fieldwidth, std::ostream& out)
<div name="content">	{
		if (!db_.hasKey(key))
			return;
		Element&lt;Data&gt; elem = db_.value(key);
		int save = out.setf(std::ios::left, std::ios::adjustfield);
		out &lt;&lt; "  ";
		out &lt;&lt; "key      : " &lt;&lt; key &lt;&lt; "\n  ";
		out &lt;&lt; "Name     : " &lt;&lt; static_cast&lt;std::string&gt;(elem.name) &lt;&lt; "\n  ";
		out &lt;&lt; "Category : " &lt;&lt; static_cast&lt;std::string&gt;(elem.category) &lt;&lt; "\n  ";
		DateTime dt = elem.dateTime;
		out &lt;&lt; "DateTime : " &lt;&lt; static_cast&lt;std::string&gt;(dt) &lt;&lt; "\n  ";
		out &lt;&lt; "Data     : " &lt;&lt; elem.data.getValue() &lt;&lt; "\n  ";
		out &lt;&lt; "Children :\n    ";
		if (elem.children.getValue().size() &gt; 0)
<div name="content">		{
			for (Key k : elem.children.getValue())
				out &lt;&lt; std::setw(fieldwidth) &lt;&lt; static_cast&lt;std::string&gt;(k).substr(0, fieldwidth) &lt;&lt; " ";
		}</div>
		out &lt;&lt; "\n";
		out.setf(save);
	}</div>
	//----&lt; show single record &gt;-----------------------------------------
	/*
	* Style: Display&lt;Data&gt;::summary or Display&lt;Data&gt;::detailed
	* fieldwidth: number of characters for each field
	* out: stream for output - typically std::cout (default) or std::ostringstream
	*/
	template&lt;typename Data&gt;
	void Display&lt;Data&gt;::show(Key key, Style style, size_t fieldwidth, std::ostream& out)
<div name="content">	{
		if (!db_.hasKey(key))
			return;
		if (style == Display&lt;Data&gt;::Style::summary)
			showSummary(key, fieldwidth, out);
		else
			showDetails(key, fieldwidth, out);
	}</div>
	//----&lt; show all records &gt;-------------------------------------------
	/*
	* Style: Display&lt;Data&gt;::summary or Display&lt;Data&gt;::detailed
	* fieldwidth: number of characters for each field
	* out: stream for output - typically std::cout (default) or std::ostringstream
	*/
	template&lt;typename Data&gt;
	void Display&lt;Data&gt;::showAll(Style style, size_t fieldwidth, std::ostream& out)
<div name="content">	{
		Keys keys = db_.keys();
		if (style == Display&lt;Data&gt;::Style::summary)
<div name="content">		{
			showHeader(style, fieldwidth, out);
			for (Key k : keys)
				showSummary(k, fieldwidth, out);
		}</div>
		else
<div name="content">		{
			for (Key k : keys)
				showDetails(k, fieldwidth, out);
		}</div>
	}</div>
	//----&lt; show all records in query &gt;----------------------------------
	/*
	* Style: Display&lt;Data&gt;::summary or Display&lt;Data&gt;::detailed
	* fieldwidth: number of characters for each field
	* out: stream for output - typically std::cout (default) or std::ostringstream
	*/
	template&lt;typename Data&gt;
	void Display&lt;Data&gt;::showQuery(Keys keys, Style style, size_t fieldwidth, std::ostream& out)
<div name="content">	{
		if (style == Display&lt;Data&gt;::Style::summary)
<div name="content">		{
			showHeader(style, fieldwidth, out);
			for (Key k : keys)
				showSummary(k, fieldwidth, out);
		}</div>
		else
<div name="content">		{
			for (Key k : keys)
				showDetails(k, fieldwidth, out);
		}</div>
	}</div>
	//----&lt; shows underlined names of each field for summary output &gt;----

	template&lt;typename Data&gt;
	void Display&lt;Data&gt;::showHeader(Style style, size_t fieldwidth, std::ostream& out)
<div name="content">	{
		size_t numChildren = 0;
		Keys keys = db_.keys();
		for (Key k : keys)
<div name="content">		{
			size_t size = db_.value(k).children.getValue().size();
			if (numChildren &lt; size)
				numChildren = size;
		}</div>
		int save = out.setf(std::ios::left, std::ios::adjustfield);
		out &lt;&lt; "  ";
		out &lt;&lt; std::setw(fieldwidth) &lt;&lt; std::string("Key").substr(0, fieldwidth) &lt;&lt; " ";
		out &lt;&lt; std::setw(fieldwidth) &lt;&lt; std::string("Name").substr(0, fieldwidth) &lt;&lt; " ";
		out &lt;&lt; std::setw(fieldwidth) &lt;&lt; std::string("Category").substr(0, fieldwidth) &lt;&lt; " ";
		out &lt;&lt; std::setw(fieldwidth) &lt;&lt; std::string("TimeDate").substr(0, fieldwidth) &lt;&lt; " ";
		out &lt;&lt; std::setw(fieldwidth) &lt;&lt; std::string("Data").substr(0, fieldwidth) &lt;&lt; " ";
		if (numChildren &gt; 0)
<div name="content">		{
			for (size_t i = 0; i &lt; numChildren; ++i)
				out &lt;&lt; std::setw(fieldwidth) &lt;&lt; std::string("Child").substr(0, fieldwidth) &lt;&lt; " ";
		}</div>
		out &lt;&lt; "\n  ";
		for (size_t i = 0; i &lt; numChildren + 5; ++i)
			out &lt;&lt; std::setw(fieldwidth) &lt;&lt; std::string("----------").substr(0, fieldwidth) &lt;&lt; " ";
		out &lt;&lt; "\n";
		out.setf(save);
	}</div>
}</div>
</pre>
</body>
</html>
